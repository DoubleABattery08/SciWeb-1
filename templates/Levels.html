{% extends "darkThemeTemplate.html" %}

{% block title %}
<title>SciWeb - Practice</title>
{% endblock %}

{% block css %}
<link rel="stylesheet" href="https://unpkg.com/vis-network/styles/vis-network.min.css">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link rel="stylesheet" href="{{ url_for('static', filename='levels.css') }}">
{% endblock %}

{% block content %}
<div class="derive-container">
    <!-- Left Panel: Unit Selection -->
    <div class="left-panel">
        <div class="class-selection">
            <h2>Select Unit</h2>
            <select id="unit-select" class="modern-select">
                <option value="" disabled selected>Choose a unit...</option>
            </select>
        </div>
        <div class="progress-section">
            <h3>Progress</h3>
            <div class="progress-stats">
                <div class="stat">
                    <span class="stat-label">Problems Completed</span>
                    <span class="stat-value">0/0</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Time Spent</span>
                    <span class="stat-value">0h 0m</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Center Panel: Problem Interface -->
    <div class="center-panel">
        <div class="chat-header">
            <div class="chat-title">
                <h2>Practice Problems</h2>
                <span class="subtitle">Master concepts through problem-solving</span>
            </div>
        </div>
        <div class="problem-container">
            <!-- Current Problem Display -->
            <div id="problem-display" class="problem-display">
                <div class="problem-header">
                    <span class="problem-number">Problem #1</span>
                    <span class="problem-difficulty">Difficulty: Medium</span>
                </div>
                <div class="problem-content">
                    <p id="problem-text">Select a unit to begin solving problems...</p>
                </div>
            </div>

            <!-- Answer Section -->
            <div id="answer-section" class="answer-section">
                <div class="answer-input-container">
                    <textarea id="answer-input" placeholder="Enter your answer here..." rows="3"></textarea>
                    <button id="submit-answer" class="submit-button" disabled>
                        <span class="material-icons">check</span>
                    </button>
                </div>
                
                <!-- Verbal Explanation Section -->
                <div id="explanation-section" class="explanation-section hidden">
                    <div class="explanation-prompt">
                        <p>Now, explain your reasoning:</p>
                        <button id="record-button" class="record-button">
                            <span class="material-icons">mic</span>
                        </button>
                    </div>
                    <div id="transcription" class="transcription hidden">
                        <h4>Your Explanation:</h4>
                        <p id="transcription-text"></p>
                    </div>
                </div>

                <!-- Evaluation Results -->
                <div id="evaluation-results" class="evaluation-results hidden">
                    <h4>Analysis of Your Understanding:</h4>
                    <div id="logical-statements" class="logical-statements">
                        <!-- Statements will be added here dynamically -->
                    </div>
                    <div id="concept-modifications" class="concept-modifications">
                        <h4>Suggested Concept Map Updates:</h4>
                        <!-- Modifications will be added here dynamically -->
                    </div>
                </div>
            </div>

            <!-- Navigation Controls -->
            <div class="problem-navigation">
                <button id="prev-problem" class="nav-button" disabled>
                    <span class="material-icons">arrow_back</span>
                    Previous
                </button>
                <button id="next-problem" class="nav-button" disabled>
                    Next
                    <span class="material-icons">arrow_forward</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Right Panel: Concept Map -->
    <div class="right-panel">
        <div class="map-header">
            <div class="map-title">
                <h2>Concept Map</h2>
                <span class="subtitle">Your learning progress</span>
            </div>
            <div class="map-controls">
                <button id="zoom-in" class="control-button" title="Zoom In">
                    <span class="material-icons">zoom_in</span>
                </button>
                <button id="zoom-out" class="control-button" title="Zoom Out">
                    <span class="material-icons">zoom_out</span>
                </button>
                <button id="reset-view" class="control-button" title="Reset View">
                    <span class="material-icons">center_focus_strong</span>
                </button>
            </div>
        </div>
        <div id="concept-map"></div>
        <div class="legend">
            <div class="legend-item">
                <span class="status-dot pending"></span> Not Started
            </div>
            <div class="legend-item">
                <span class="status-dot in-progress"></span> Derived
            </div>
            <div class="legend-item">
                <span class="status-dot completed"></span> Mastered
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block js %}
<script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
<script src="{{ url_for('static', filename='levels.js') }}"></script>
{% endblock %} 