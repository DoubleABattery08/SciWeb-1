{% extends "darkThemeTemplate.html" %}

{% block title %}
<title>SciWeb | Class</title>
{% endblock %}

<!-- css block -->
{% block css %}
<link rel="stylesheet" href="/static/class.css">

{% endblock %}

<!-- content block -->
{% block content %}
<!-- Class Section -->

<section id="class-section">

  <div class="class-header" id="class-header">
    <div id="classimgcontainer">
      <input type="file" id="imgupload" accept="image/*" style="display: none;">
      <label for="imgupload" class="image-upload-label">ðŸ“· Change Cover Image</label>
    </div>
    <div class="header-content">
      <h1>{{ class_name }}</h1>
      <div class="color-picker">
        <label id="colorLabel" class="color-label">ðŸŽ¨ Change Theme</label>
        <input type="color" id="color" style="display: none;">
        <button id="savecolor" style="display: none;">Save</button>
      </div>
      <div class="header-actions">
        <button id="joinBtn" class="action-button" style="display: none;">Join Class</button>
        <button id="createBtn" class="action-button">Create Assignment</button>
        <button id="leaveClass" class="action-button danger">Leave Class</button>
      </div>
    </div>
  </div>
  <!-- Add this form after the header -->
  <div id="formContainer" class="modal" style="display: none;">
    <div class="modal-content">
      <form id="assignmentForm" class="assignment-form">
        <h3>Create New Assignment</h3>
        <div class="form-group">
          <label for="name">Assignment Name</label>
          <input type="text" id="name" required>
        </div>
        
        <div class="form-group">
          <label for="assignmentType">Category</label>
          <select id="assignmentType" required>
            <!-- Options will be populated by JavaScript -->
          </select>
        </div>
        
        <div class="form-group">
          <label for="points">Points</label>
          <input type="number" id="points" required min="0">
        </div>
        
        <div class="form-group">
          <label for="due">Due Date</label>
          <input type="date" id="due" required>
        </div>
        
        <div class="form-actions">
          <button type="submit" class="action-button">Create</button>
          <button type="button" class="action-button secondary" id="cancelBtn">Cancel</button>
        </div>
      </form>
    </div>
  </div>

  <div class="grid-layout">
    <div class="info-card class-details">
      <h3>Class Information</h3>
      <div id="description"></div>
      <div class="editable-field">
        <span>Teacher: </span>
        <span id="teacher" contenteditable="true"></span>
      </div>
      <div class="editable-field">
        <span>Period: </span>
        <span id="period" contenteditable="true"></span>
      </div>
    </div>

    <div class="info-card grading-categories">
      <h3>Grading Categories</h3>
      <div id="categoriesContainer"></div>
    </div>

    <div class="info-card class-members">
      <h3>Class Members</h3>
      <div id="user-list"></div>
    </div>

    <div class="info-card assignments">
      <h3>Assignments</h3>
      <div id="assignmentList"></div>
    </div>

    <div class="info-card video-conference">
      <h3>Class Video Conference</h3>
      <div id="meet-wrapper">
        <div id="meet"></div>
        <div class="meeting-controls">
          <button id="startMeeting" class="action-button">Start/Join Meeting</button>
          <span id="participantCount" class="participant-count"></span>
        </div>
      </div>
    </div>

    <div class="info-card chat">
      <h3>Class Discussion</h3>
      <div id="chat-box">
        <div id="message-list"></div>
        <div id="input-container">
          <input type="text" id="message-input" placeholder="Type your message...">
          <button id="send-button" class="action-button">Send</button>
          <button id="clear" class="action-button">Clear</button>
          <label for="upload" class="action-button">ðŸ“Ž</label>
          <input type="file" id="upload" hidden>
        </div>
      </div>
    </div>
  </div>
</section>

{% endblock %}

<!-- js block -->
{% block js %}
<script src='https://meet.jit.si/external_api.js'></script>
<script src="/static/jitsi.js"></script>
<script src="/static/class.js"></script>
<script src="/static/setdesign.js"></script>
{% endblock %}
