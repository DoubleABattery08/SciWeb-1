{% extends "darkThemeTemplate.html" %}

{% block title %}
<title>SciWeb - Derive Concepts</title>
{% endblock %}

{% block css %}
<link rel="stylesheet" href="https://unpkg.com/vis-network/styles/vis-network.min.css">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link rel="stylesheet" href="{{ url_for('static', filename='derive.css') }}">
{% endblock %}

{% block content %}
<div class="derive-container">
    <!-- Left Panel: Unit Selection -->
    <div class="left-panel">
        <div class="class-selection">
            <h2>Select Unit</h2>
            <select id="unit-select" class="modern-select">
                <option value="" disabled selected>Choose a unit...</option>
            </select>
        </div>
        <div class="progress-section">
            <h3>Progress</h3>
            <div class="progress-stats">
                <div class="stat">
                    <span class="stat-label">Concepts Derived</span>
                    <span class="stat-value">0/0</span>
                </div>
                <div class="stat">
                    <span class="stat-label">Time Spent</span>
                    <span class="stat-value">0h 0m</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Center Panel: Chat Interface -->
    <div class="center-panel">
        <div class="chat-header">
            <div class="chat-title">
                <h2>Derive Concepts</h2>
                <span class="subtitle">Let's discover mathematics together</span>
            </div>
        </div>
        <div class="chat-container">
            <div id="chat-messages" class="chat-messages">
                <div class="message system">
                    Select a unit to begin deriving concepts. We'll start with the foundational concepts and work our way up.
                </div>
            </div>
            <div class="chat-input-container">
                <textarea id="derive-user-input" placeholder="Type your message..." rows="1"></textarea>
                <button id="send-message" class="send-button">
                    <span class="material-icons">send</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Right Panel: Concept Map -->
    <div class="right-panel">
        <div class="map-header">
            <div class="map-title">
                <h2>Progress Map</h2>
                <span class="subtitle">Your derivation journey</span>
            </div>
            <div class="map-controls">
                <button id="zoom-in" class="control-button" title="Zoom In">
                    <span class="material-icons">zoom_in</span>
                </button>
                <button id="zoom-out" class="control-button" title="Zoom Out">
                    <span class="material-icons">zoom_out</span>
                </button>
                <button id="reset-view" class="control-button" title="Reset View">
                    <span class="material-icons">center_focus_strong</span>
                </button>
            </div>
        </div>
        <div id="concept-map"></div>
        <div class="legend">
            <div class="legend-item">
                <span class="status-dot pending"></span> Not Started
            </div>
            <div class="legend-item">
                <span class="status-dot in-progress"></span> Deriving
            </div>
            <div class="legend-item">
                <span class="status-dot completed"></span> Derived
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block js %}
<script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
<script src="{{ url_for('static', filename='derive.js') }}"></script>
{% endblock %} 